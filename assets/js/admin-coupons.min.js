jQuery(document).ready((function(c){"use strict";c(document).on("click",".viwcc-customer-coupon-column .action",(function(){let o=c(this);o.addClass("loading"),c.ajax({url:viwcc_admin_coupons.ajax_url,type:"post",dataType:"JSON",data:{action:"viwcc_coupon_change_status",coupon_id:o.closest(".viwcc-customer-coupon-column").data("coupon_id")||"",type:o.hasClass("trash")?"trash":"enable",viwcc_nonce:viwcc_admin_coupons.nonce},success:function(e){if(o.removeClass("loading"),e.message&&c(document.body).trigger("villatheme_show_message",[e.message,[e.status],"",!1,4500]),"error"===e.status)return!1;o.closest(".viwcc-customer-coupon-column").find(".action").addClass("vi_wcc_hidden"),e.display?(o.closest(".viwcc-customer-coupon-column").find(".status").html('<i class="dashicons dashicons-saved">'),o.closest(".viwcc-customer-coupon-column").find(".trash").removeClass("vi_wcc_hidden")):(o.closest(".viwcc-customer-coupon-column").find(".status").html("-"),o.closest(".viwcc-customer-coupon-column").find(".enable").removeClass("vi_wcc_hidden"))},error:function(e){console.log(e),c(document.body).trigger("villatheme_show_message",[-1==e.responseText?e.statusText:e.responseText,["error"],"",!1,4500]),o.removeClass("loading")}})})),c(document).on("keyup change","#wcc_custom_coupon_title, #wcc_custom_coupon_terms",(function(){let o=c(this).val()||("wcc_custom_coupon_title"===c(this).attr("id")?viwcc_admin_coupons.coupon_title:viwcc_admin_coupons.coupon_des);if(o){let e=c("#coupon_amount").val()||0;"percent"===c("#discount_type").val()?e+="%":e=viwcc_admin_coupons.wc_price_format.replace("%2$s",e),o=o.replaceAll("{coupon_code}",c('[name="post_title"]').val()).replaceAll("{coupon_value}",e).replaceAll("{min_spend}",viwcc_admin_coupons.wc_price_format.replace("%2$s",c("#minimum_amount").val()||0)).replaceAll("{max_spend}",""!==c("#maximum_amount").val()?viwcc_admin_coupons.wc_price_format.replace("%2$s",c("#maximum_amount").val()):viwcc_admin_coupons.no_maximum)}"wcc_custom_coupon_title"===c(this).attr("id")?c(".viwcc-coupon-title").html(o):c(".viwcc-coupon-des").html(o)})),c(document).on("click",".viwcc_customer_coupon_tab",(function(){c("#wcc_custom_coupon_title, #wcc_custom_coupon_terms").trigger("change")}))}));